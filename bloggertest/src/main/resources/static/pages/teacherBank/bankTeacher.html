<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
		<meta name="author" content="Coderthemes">

		<link rel="shortcut icon" href="../../img/favicon_1.ico" th:src="@{static/img/favicon_1.ico}">

		<title>题库</title>

		<link href="../../css/bootstrap.min.css" th:href="@{static/css/bootstrap.min.css}" rel="stylesheet" type="text/css">
		<link href="../../css/setcore.css" th:href="@{static/css/setcore.css}" rel="stylesheet" type="text/css">
		<link href="../../css/icons.css" th:href="@{static/css/icons.css}" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="../../css/ie7.css" th:href="@{static/css/ie7.css}">
		<link href="../../css/components.css" th:href="@{static/css/components.css}" rel="stylesheet" type="text/css">
		<link href="../../css/pages.css" th:href="@{static/css/pages.css}" rel="stylesheet" type="text/css">
		<link href="../../css/menu.css" th:href="@{static/css/menu.css}" rel="stylesheet" type="text/css">
		<link href="../../css/responsive.css" th:href="@{static/css/responsive.css}" rel="stylesheet" type="text/css">
		<link href="../../font-awesome-4.7.0/css/font-awesome.min.css" th:href="@{static/font-awesome-4.7.0/css/font-awesome.min.css}" rel="stylesheet">
		<link rel="stylesheet" href="../../css/cropper.min.css" th:href="@{static/css/cropper.min.css}">
		<link rel="stylesheet" href="../../css/ImgCropping.css" th:href="@{static/css/ImgCropping.css}">

		<link rel="stylesheet" type="text/css" href="../../css/alert.css" th:href="@{static/css/alert.css}">
		<link rel="stylesheet" type="text/css" href="../../css/bankTeacher.css" th:href="@{static/css/bankTeacher.css}">
		<link rel="stylesheet" href="../../css/folder.css" th:href="@{static/css/folder.css}">
		<link rel="stylesheet" type="text/css" href="../../css/bankteachefolder.css" th:href="@{static/css/bankteachefolder.css}" />
		<script src="../../js/jquery.min.js" th:src="@{static/js/jquery.min.js}"></script>
		<script src="../../js/modernizr.min.js" th:src="@{static/js/modernizr.min.js}"></script>

	</head>

	<body class="fixed-left">

		<!-- 大的页面 -->
		<div id="wrapper">

			<!-- 导航栏开始 -->
			 <div class="topbar">
				<!-- LOGO -->
				<div class="topbar-left">
					<div class="text-center">
						<a href="toindex" class="logo"><img src="../../img/logo.png" th:src="@{static/img/logo.png}" width="60px" /><span>飞马测试 </span></a>
					</div>
				</div>

				<div class="navbar navbar-default" role="navigation">
					<div class="container">
						<div class="">
							<div class="pull-left">
								<button class="button-menu-mobile open-left">
                                    <i class="fa fa-bars"></i>
                                </button>
								<span class="clearfix"></span>
							</div>
							<ul class="nav navbar-nav navbar-left pull-left">
								<li class="hidden-xs">
									<a th:href="tounpublishteacherPaper" id="" class="waves-effect"><i class="glyphicon glyphicon-education nvaIcon"></i>试卷</a>
								</li>
								<li class="hidden-xs">
									<a th:href="tobankTeacher" id="" class="waves-effect"><i class="glyphicon glyphicon-folder-open nvaIcon"></i>题库</a>
								</li>
								<li class="hidden-xs">
									<a th:href="toGroup" id="" class="waves-effect"><i class="fa fa-users nvaIcon"></i>群组</a>
								</li>
								<li class="hidden-xs">
									<a th:href="tobankshop" id="" class="waves-effect"><i class="fa fa-shopping-basket nvaIcon"></i>题库商城</a>
								</li>
							</ul>
							<ul class="nav navbar-nav navbar-right pull-right">
								<li class="dropdown hidden-xs">
									<a href="#" data-target="#" class="dropdown-toggle waves-effect" data-toggle="dropdown" aria-expanded="true">
										<i class="md md-notifications"></i> <span class="badge badge-xs badge-danger">3</span>
									</a>
									<ul class="dropdown-menu dropdown-menu-lg">
										<li class="text-center notifi-title">通知</li>

									</ul>
								</li>

								<li class="hidden-xs">
									<a href="#" id="btn-fullscreen" class="waves-effect"><i class="md md-crop-free"></i></a>
								</li>
								<li class="hidden-xs">
									
								</li>
								<li class="dropdown">
									<a href="" class="dropdown-toggle profile" data-toggle="dropdown" aria-expanded="true"><img src="../../img/defalutIcon.png" th:src="@{static/img/defalutIcon.png}" alt="user-img" class="img-circle"> </a>
									<ul class="dropdown-menu">
										<li>
											<a th:href="toExamEntrance"><i class="fa fa-pencil nvaIcon2"></i> 考试入口</a>
										</li>
										<li>
											<a th:href="tochangeUserInfor"><i class="md md-settings nvaIcon2"></i> 我的设置</a>
										</li>
										<li>
											<a th:href="tomymoneyaccount"><i class="fa fa-diamond nvaIcon2"></i> 我的账户</a>
										</li>
										<li>
											<a href="toLogout"><i class="md md-settings-power nvaIcon2"></i> 退出登录</a>
										</li>
									</ul>
								</li>
								<li class="hidden-xs">
									<a th:href="switchIdentity" class="waves-effect"><i class="fa fa-exchange"></i></a>
								</li>
							</ul>
						</div>
						<!--用户选项 -->
					</div>
				</div>
			</div>
			<!-- 导航栏结束 -->

			<div class="left side-menu">
				<div class="sidebar-inner slimscrollleft">
					<div class="user-details">
						<center><button type="button" class="btn btn-success" data-toggle="modal" data-target="#add-bankModal"><i class="fa fa-plus"></i><span>新增题库</span></button></center>
					</div>
					<!--- Divider -->
					<div id="sidebar-menu">
						<ul>

							<li class="has_sub" >
								<a class="waves-effect waves-light" onclick="bank()" style="color:#ffffff;"><i class="fa fa-folder-open"></i><span>我的题库</span><span class="pull-right"></span></a>

							</li>
						
							<li class="has_sub" >
								<a class="waves-effect waves-light"  onclick="garbage()"><i class="fa fa-trash"></i><span >回收站</span><span class="pull-right"></span></a>

							</li>
						
						</ul>
						<div class="clearfix"></div>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<!-- 左边bar结束 -->

			<!-- ============================================================== -->
			<!-- 中间信息显示开始 ->
			<!-- ============================================================== -->
			<div class="content-page">
				<!-- 内容开始 -->
				<div class="content">
					<div class="container">

						<!-- 页面名称 -->
						<div class="row">
							<div class="col-sm-12">
								<h4 class="pull-left page-title">
								<span
									style="color: green; background-color: green; width: 10px; margin-right: 15px;"><b>|</b></span>
							</h4>
								<div class="file-operater"><button type="button" id="add-folder" class="btn btn-dark" data-toggle="modal" data-target="#add-folderModal"><i class="fa fa-plus"></i><span>增加文件夹</span></button></div>
								<div class="file-operater"><button type="button" id="delete-folder" class="btn btn-dark"><i class="fa fa-trash"></i><span>删除文件夹</span></button></div>
								<div class="file-operater"><button type="button" id="editor-folder" class="btn btn-dark"><i class="fa fa-pencil"></i><span>重命名文件夹</span></button></div>
								<div class="file-operater"><button type="button" id="open-folder" class="btn btn-dark"><i class="fa fa-folder-open"></i><span>打开文件夹</span></button></div>

							</div>
						</div>

						<!-- 页面详情-->
						<div style="height: auto; background: #FFFFFF;">
							<div class="inforContainer">
								<div class="folder-container ">
									<input id="currentfolderid" type="hidden" th:value="${currentfolderid}" />
									<!-- 这里是文件显示面包屑路径 -->
									<div class="modal-name breadcrumbs"><i class="fa fa-bookmark fa-2x"></i>
										<tr>
											<a th:href="tobankTeacher"> 题库文件夹</a>
											<a th:each="path :${pathlist}" th:text="'>'+${path.foldername}" th:href="@{tobankTeacher2?folderid={folderid}(folderid=${path.folderid})}"></a>
										</tr>
									</div>
									<!-- <div class="folder-report" th:if="${#lists.isEmpty(allbankfolder)}"><div> -->
									<div class="folder-report addreport" th:if="${#lists.isEmpty(allbankfolder)}"  data-toggle="modal" data-target="#add-folderModal">
										<div class="folder-item" style="text-align: center;border: 2px dashed #e3e3e3;height: 100px;">
										
											<div style="color: #16A085;margin-top: 20px;">
												<i class="fa fa-plus fa-4x"></i>
											</div>
											<div class="folder-name">
												<center></center>
											</div>

										</div>
									</div>
									
									
									
									<div class="folder-report" th:each="bankfolder :${allbankfolder}" th:folderid="${bankfolder.folderid}"  th:if="!${#lists.isEmpty(allbankfolder)}" >
										<div class="folder-item">
											<div class="folder  folder--durga">
												<!-- 展示文件夹中前三个题库名称，若有多的用逗号代替 -->
												<div class="folder__icon">

													<div class="folder__preview folder__preview--text" style="left: 160%;top: -30%;">

														<p class="folder__detail" th:each="bank :${bankfolder.banklist}" th:text="${bank.bankname}" th:if="${bankStat.count <=3}">

														</p>

														<!--
														<p class="folder__detail">面试题3</p>
														<p class="folder__detail">...</p>-->
													</div>

												</div>
												<div class="front" id="icon-foldercover" th:text="${bankfolder.c3}" th:folderid="${bankfolder.folderid}"></div>

												<div class="back"></div>

											</div>
											<div class="folder-name">
												<center><span th:text="${bankfolder.foldername}"></span></center>
											</div>

										</div>
									</div>
								</div>
								<div class="bank-container">
									<div class="modal-name"><i class="fa fa-bookmark fa-2x"></i></i>
										<a>题库</a>
									</div>

									<!-- 已上架题库例子 -->
									<p1 th:each="uploadedBank:${uploadedBanklist}">
										<div class="custom-col" th:bankid="${uploadedBank.bankid}">
											<div class="single-product-item">
												<!--<div class="folder  folder--durga">
												<div class="folder__icon">													<div class="folder__preview folder__preview--text" style="left: 160%;    top: -30%;">
														<p class="folder__detail">面试题1</p>
														<p class="folder__detail">面试题2</p>
														<p class="folder__detail">面试题3</p>
														<p class="folder__detail">...</p>
													</div>
												</div>
											</div>-->
												<div class="bank-label flag-left">题库</div>
												<div class="product-image">
													<div class="product-hover">
														<div class="product-mask"></div>
														<ul class="hover-icon-list">

															<li>
																<a th:href="@{toeditbankinfo?bankid={bankid}(bankid=${uploadedBank.bankid})}" data-toggle="tooltip" title="查看"><i class="icon icon-Search"></i></a>
															</li>
															<li>
																<a data-toggle="tooltip" title="编辑" id="editbank" onclick="edit2(this)"> <i class="icon icon-Pencil"></i></a>
															</li>
															<li>
																<a href="" data-toggle="tooltip" title="查看上架情况"><i class="icon icon-UploadCLoud"></i></a>
															</li>
															<li>
																<a data-toggle="tooltip" title="删除" class="delete-bank" id="这里放入bankid" ><i class="icon icon-Delete"></i></a>
															</li>
															
														</ul>
														<ul class="hover-icon-list" style="top: 60%;left:40%;">
															<li>
																<a data-toggle="tooltip" title="添加" class="addtitle-paper" id="这里放入paperid" onclick="addquestion2()"><i class="icon icon-Book"></i></a>
															</li>
														</ul>

													</div>
												</div>
												<div class="product-text">
													<!-- 题库看题目 -->
													<h5><a href="product-details.html" th:text="${uploadedBank.bankname}">小升初高级数学模拟题</a></h5>
													<!-- 最近更新于 -->
													<h6><i class="fa fa-pencil-square-o"></i><a th:text="${#dates.format(uploadedBank.updatetime,'yyyy-MM-dd HH:mm:ss')}">2019-10-12 12:12:12</a></h6>
													<!-- 题库描述 -->
													<h6 class="c-blue"> 题库描述：<a th:text="${uploadedBank.bankdescription}">题库描述：这是用来给小学生做的这是用来给小学生做的这是用来给小学生做的这是用来给小学生做的</a></h6>

													<div class="product-number">
														<!-- 题量(题目总数量) -->
														<span class="new-info" title="题量"><h4 th:text="${uploadedBank.questionnum}"></h4>道题</span>
													</div>

												</div>
											</div>
										</div>

									</p1>

									<p1 th:each="unuploadedBank:${unuploadedBanklist}">
										<!-- 未上架题库例子 -->
										<div class="custom-col" th:bankid="${unuploadedBank.bankid}">
											<div class="single-product-item">
												<div class="bank-label flag-left">题库</div>
												<div class="product-image">
													<div class="product-hover">
														<div class="product-mask"></div>
														<ul class="hover-icon-list">
															<li>
																<a th:href="@{editorBank?bankid={bankid}(bankid=${unuploadedBank.bankid})}" data-toggle="tooltip" title="查看/编辑"><i class="icon icon-Search"></i></a>
															</li>

															<li>
																<a data-toggle="tooltip" title="编辑题库信息" id="editbank" th:value="${unuploadedBank.bankid}" th:name="${unuploadedBank.bankname}" th:description="${unuploadedBank.bankdescription}" onclick="edit(this)"><i class="icon icon-Pencil"></i></a>
															</li>
															<li>
																<a data-toggle="tooltip" title="上架" th:value="${unuploadedBank.bankid}" onclick="upload(this)"><i class="icon icon-Share"></i></a>
															</li>
															<li>
																<a data-toggle="tooltip" title="删除" class="delete-bank" id="这里放bankid"><i class="icon icon-Delete"></i></a>
															</li>
														</ul>
														<ul class="hover-icon-list" style="top: 60%;left:40%;">
															<li>
																<a data-toggle="tooltip" title="添加" class="addtitle-paper" th:value="${unuploadedBank.bankid}" onclick="addquestion(this)"><i class="icon icon-Book"></i></a>
															</li>
														</ul>

													</div>
												</div>
												<div class="product-text">
													<!-- 题库看题目 -->
													<h5><a href="product-details.html" th:text="${unuploadedBank.bankname}">小升初高级数学模拟题</a></h5>
													<!-- 最近更新于 -->
													<h6><i class="fa fa-pencil-square-o"></i><a th:text="${#dates.format(unuploadedBank.updatetime,'yyyy-MM-dd HH:mm:ss')}">2019-10-12 12:12:12</a></h6>
													<!-- 题库描述 -->
													<h6 class="c-blue"><a th:text="${unuploadedBank.bankdescription}">题库描述：这是用来给小学生做的</a></h6>

													<div class="product-number">
														<!-- 题量(题目总数量) -->
														<span class="new-info" title="题量"><h4 th:text="${unuploadedBank.questionnum}">330</h4>道题</span>
												
													</div>

												</div>
											</div>
										</div>
									</p1>
								</div>

							</div>
						</div>
					</div>
					<!-- 内容结束 -->

				</div>
				<!-- 内容容器结束 -->

			</div>

			<!-- 右边通讯录滑页 -->
<!-- 			<div class="side-bar right-bar nicescroll"> -->
<!-- 				<h4 class="text-center">通讯录</h4> -->
<!-- 				<div class="contact-list nicescroll"> -->
<!-- 					<ul class="list-group contacts-list"> -->
<!-- 						<li class="list-group-item"> -->
<!-- 							<a href="#"> -->
<!-- 								<div class="avatar"> -->
<!-- 									<img src="../../img/users/avatar-1.jpg" th:src="@{static/img/users/avatar-1.jpg}" alt=""> -->
<!-- 								</div> <span class="name">郭力源</span> <i class="fa fa-circle online"></i> -->
<!-- 							</a> <span class="clearfix"></span></li> -->
<!-- 						<li class="list-group-item"> -->
<!-- 							<a href="#"> -->
<!-- 								<div class="avatar"> -->
<!-- 									<img src="../../img/users/avatar-2.jpg" th:src="@{static/img/users/avatar-2.jpg}" alt=""> -->
<!-- 								</div> <span class="name">郑娇</span> <i class="fa fa-circle online"></i> -->
<!-- 							</a> <span class="clearfix"></span></li> -->

<!-- 					</ul> -->
<!-- 				</div> -->
<!-- 			</div> -->
			<!-- 滑页结束 -->

		</div>
		<!-- 页面结束 -->
		<!--图片裁剪框 start-->
		<div style="display: none" class="tailoring-container">
			<div class="black-cloth" onClick="closeTailor(this)"></div>
			<div class="tailoring-content">
				<div class="tailoring-content-one">
					<label id="imageKTitle">上传头像</label>
					<div class="close-tailoring" onclick="closeTailor(this)">×</div>
				</div>
				<div class="tailoring-content-two">
					<div class="tailoring-box-parcel">
						<img id="tailoringImg">
					</div>
					<div class="preview-box-parcel">

						<!-- <div class="square previewImg"></div> -->
						<center>
							<div class="circular previewImg"></div>
							<p>
								图片预览<br />108px × 108px
							</p>
							<br /> <label title="上传图片" for="chooseImg" class="l-btn choose-btn"> <input type="file"
							accept="image/jpg,image/jpeg,image/png" name="file"
							id="chooseImg" class="hidden" onChange="selectImg(this)" /> 选择图片
						</label>
						</center>
					</div>
				</div>
				<div class="tailoring-content-three">
					<button class="l-btn cropper-reset-btn">复位</button>
					<button class="l-btn cropper-rotate-btn">旋转</button>
					<button class="l-btn cropper-scaleX-btn">换向</button>
					<button class="l-btn sureCut" id="sureCut">确认上传</button>
				</div>
			</div>
		</div>
		<!--图片裁剪框 end-->
		<!-- Main  -->

		<!--警告提示框-->
		<div class="alert"></div>

		<!-- 增加文件夹 -->
		<div class="modal fade bs-example-modal-sm" id="add-folderModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog modal-sm" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">增加文件夹</h4>
					</div>
					<div class="modal-body">
						<form>
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>文件夹名称：</label>
								<input type="text" class="form-control" id="recipient-name">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success" id="addbankfolder">确认</button>
					</div>
				</div>
			</div>
		</div>

		<!-- 重命名文件夹 -->
		<div class="modal fade" id="editor-folderModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog modal-sm" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">重命名文件夹</h4>
					</div>
					<div class="modal-body">
						<form>
							<div class="form-group">
								<label for="recipient-name" class="control-label">名字：</label>
								<input type="text" class="form-control" id="old-name" disabled/>
							</div>
							<div class="form-group">
								<label for="recipient-name" class="control-label">新名字：</label>
								<input type="text" class="form-control" id="new-name">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success" id="renamebankfolderbtn">确认</button>
					</div>
				</div>
			</div>
		</div>

		<!--删除文件夹 -->
		<div class="modal fade" id="delete-folderModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog modal-sm" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">删除文件夹</h4>
					</div>
					<div class="modal-body">
						已删除文件夹可以在回收站查看
					</div>

					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					<button type="button" class="btn btn-danger" id="deletebankfolder">确认删除</button>

				</div>
			</div>
		</div>
		
		<!--添加题目-->
		<div class="modal fade" id="addtitle-paperModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog modal-md" role="document" style="width: 700px;top:10%;">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">添加题目</h4>
					</div>
					<div class="modal-body" style="padding: 18% 0px;">
						<div class="row pl15 pr15" style="margin-left: 40px;">
							<div class="col-md-4 col-md-offset-1">
								<a class="btn btn-default btn-add" target="_blank" onclick="addbyform()">
									<p class="text-mint">
										<i class="fa fa-hand-paper-o"></i>
									</p>
									<p class="mt5" >手工录入</p>
									<p class="sub">所见即所得</p>
								</a>
							</div>
							<div class="col-md-4 col-md-offset-1">
								<a class="btn btn-default btn-add excelchoicemadol" >
									<p class="text-highlight">
										<i class="fa fa-upload"></i>
									</p>
									<p class="mt5">Excel导入</p>
									<p class="sub">批量导入类型题</p>
								</a>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
		
		
		<div class="modal fade" id="excelchoice" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog modal-md" role="document" style="width: 700px;top:10%;">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">EXCEL导题</h4>
					</div>
					<div class="modal-body" style="padding: 18% 0px;">
						<div class="row pl15 pr15" style="margin-left: 40px;">
							<div class="col-md-4 col-md-offset-1">
								
									<input id="addchoice" style="display:none" type="file" accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
								
								
								
								<a class="btn btn-default btn-add">
									<p class="text-mint">
										<i class="fa fa-cloud-upload"></i>
									</p>
									<p class="mt5">单选多选判断</p>
									<p class="sub">批量导入选项多类题目</p>
								</a>
								<center><div style="margin-top: 30px;"><a class="btn btn-success" href="/static/download/choice.xls" download="choice.xls">下载模板</a></div></center>
							</div>
							<div class="col-md-4 col-md-offset-1">
								
								<input id="addfill" type="file" style="display:none" accept="application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" />
								
								<a class="btn btn-default btn-add">
									<p class="text-highlight">
										<i class="fa fa-cloud-upload"></i>
									</p>
									<p class="mt5">填空题导入</p>
									<p class="sub">批量导入填空题</p>
								
								</a>
								<center><div style="margin-top: 30px;"><a class="btn btn-danger" href="/static/download/fill.xls" download="fill.xls">下载模板</a></div></center>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>


		<!-- 增加题库 -->
		<div class="modal fade" id="add-bankModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">新增题库</h4>
					</div>
					<div class="modal-body">
						<form>
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>题库名称：</label>
								<input type="text" class="form-control" id="bank-name" />
							</div>
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>题库描述：</label>
								<input type="text" class="form-control" id="bank-describe">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success" id="addbank">确认</button>
					</div>
				</div>
			</div>
		</div>

		<!-- 编辑题库 -->
		<div class="modal fade" id="editor-bankModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">编辑题库</h4>
					</div>
					<div class="modal-body">
						<form>
							<input id="clickbankid" type="hidden" value="" />
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>题库名称：</label>
								<input type="text" class="form-control" id="new-bank-name" />
							</div>
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>题库描述：</label>
								<input type="text" class="form-control" id="new-bank-describe">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button id="editor-sure-btn" type="button" class="btn btn-success">确认</button>
					</div>
				</div>
			</div>
		</div>

		<!-- 上传题库 -->
		<div class="modal fade" id="upload-bankModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">上架题库</h4>
					</div>
					<div class="modal-body">
						<form>
							<input id="uploadclickbankid" type="hidden" value="" />
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>题库标签：</label>
								<!--<input type="text" class="form-control" id="uploadbank-name"/>-->
								<select class="form-control" id="banklabel">
									<option>小学</option>
									<option>初中</option>
									<option>高中</option>
									<option>大学</option>
									<option>研究生</option>
									<option>互联网/软件</option>
									<option>通信/电子</option>
									<option>软件开发</option>
									<option>测试/运维</option>
									<option>产品/运营</option>
									<option>综合能力</option>
									<option>性格气质</option>
									<option>职业发展</option>

								</select>
							</div>
							<div class="form-group">
								<label for="recipient-name" class="control-label"><b class="ftx04"></b>下载所需积分：</label>
								<input type="text" class="form-control" id="uploadprice">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success" id="uploadbank">确认</button>
					</div>
				</div>
			</div>
		</div>




		<!--删除题库 -->
		<div class="modal fade" id="delete-bankModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog modal-sm" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">删除题库</h4>
					</div>
					<div class="modal-body">
						已删除题库可以在回收站查看
					</div>

					<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					<button type="button" class="btn btn-danger" id="deletebank">确认删除</button>

				</div>
			</div>
		</div>	
		<script src="../../js/jquery-2.0.3.min.js" th:src="@{static/js/jquery-2.0.3.min.js}"></script>
		<script src="../../js/bootstrap.min.js" th:src="@{static/js/bootstrap.min.js}"></script>
		<script src="../../js/fastclick.js" th:src="@{static/js/fastclick.js}"></script>
		<script src="../../js/waves.js" th:src="@{static/js/waves.js}"></script>
		<script src="../../js/wow.min.js" th:src="@{static/js/wow.min.js}"></script>
		<script src="../../js/jquery.nicescroll.js" th:src="@{static/js/jquery.nicescroll.js}"></script>
		<script src="../../js/jquery.scrollTo.min.js" th:src="@{static/js/jquery.scrollTo.min.js}"></script>
		<script src="../../js/jquery.app.js" th:src="@{static/js/jquery.app.js}"></script>
		<script type="text/javascript" src="../../js/cropper.min.js" th:src="@{static/js/cropper.min.js}"></script>
		<script src="../../js/jquery-ui.js" th:src="@{static/js/jquery-ui.js}"></script>
		<script src="../../js/script.js" th:src="@{static/js/script.js}"></script>
		<script src="../../js/anime.min.js" th:src="@{static/js/anime.min.js}"></script>
		<script src="../../js/bankTeacherFolder.js" th:src="@{static/js/bankTeacherFolder.js}"></script>
		<script src="../../js/charming.min.js" th:src="@{static/js/charming.min.js}"></script>
		<script type="text/javascript">
			//弹出框水平垂直居中
			(window.onresize = function() {
				var win_height = $(window).height();
				var win_width = $(window).width();
				if(win_width <= 768) {
					$(".tailoring-content").css({
						"top": (win_height - $(".tailoring-content").outerHeight()) / 2,
						"left": 0
					});
				} else {
					$(".tailoring-content").css({
						"top": (win_height - $(".tailoring-content").outerHeight()) / 2,
						"left": (win_width - $(".tailoring-content").outerWidth()) / 2
					});
				}
			})();

			//弹出图片裁剪框
			/*    $("#replaceImg").on("click",function () {
			       $(".tailoring-container").toggle();
			   }); */
			//图像上传
			function selectImgupload(file) {
				$(".tailoring-container").toggle();
				if(!file.files || !file.files[0]) {
					return;
				}
				var reader = new FileReader();
				reader.onload = function(evt) {
					var replaceSrc = evt.target.result;
					//更换cropper的图片
					$('#tailoringImg').cropper('replace', replaceSrc, false); //默认false，适应高度，不失真
				}
				reader.readAsDataURL(file.files[0]);
			}
			//图像上传
			function selectImg(file) {
				if(!file.files || !file.files[0]) {
					return;
				}
				var reader = new FileReader();
				reader.onload = function(evt) {
					var replaceSrc = evt.target.result;
					//更换cropper的图片
					$('#tailoringImg').cropper('replace', replaceSrc, false); //默认false，适应高度，不失真
				}
				reader.readAsDataURL(file.files[0]);
			};
			//cropper图片裁剪
			$('#tailoringImg').cropper({
				aspectRatio: 1 / 1, //默认比例
				preview: '.previewImg', //预览视图
				guides: false, //裁剪框的虚线(九宫格)
				autoCropArea: 0.5, //0-1之间的数值，定义自动剪裁区域的大小，默认0.8
				movable: false, //是否允许移动图片
				dragCrop: true, //是否允许移除当前的剪裁框，并通过拖动来新建一个剪裁框区域
				movable: true, //是否允许移动剪裁框
				resizable: true, //是否允许改变裁剪框的大小
				zoomable: false, //是否允许缩放图片大小
				mouseWheelZoom: false, //是否允许通过鼠标滚轮来缩放图片
				touchDragZoom: true, //是否允许通过触摸移动来缩放图片
				rotatable: true, //是否允许旋转图片
				crop: function(e) {
					// 输出结果数据裁剪图像。
				}
			});
			//旋转
			$(".cropper-rotate-btn").on("click", function() {
				$('#tailoringImg').cropper("rotate", 45);
			});
			//复位
			$(".cropper-reset-btn").on("click", function() {
				$('#tailoringImg').cropper("reset");
			});
			//换向
			var flagX = true;
			$(".cropper-scaleX-btn").on("click", function() {
				if(flagX) {
					$('#tailoringImg').cropper("scaleX", -1);
					flagX = false;
				} else {
					$('#tailoringImg').cropper("scaleX", 1);
					flagX = true;
				}
				flagX != flagX;
			});

			//裁剪后的处理
			$("#sureCut").on("click", function() {
				if($("#tailoringImg").attr("src") == null) {
					return false;
				} else {
					var cas = $('#tailoringImg').cropper('getCroppedCanvas'); //获取被裁剪后的canvas
					var base64url = cas.toDataURL('image/png'); //转换为base64地址形式
					$("#finalImg").prop("src", base64url); //显示为图片的形式
					var start = base64url.indexOf('base64,') + 7;
					base64url = base64url.substring(start, base64url.length);
					base64url = base64url.replace(/\+/g, "%2B");

					$.ajax({
						contentType: "application/x-www-form-urlencoded; charset=utf-8",
						type: "post",
						url: "uploadUserAuatarImg",
						data: {
							image: base64url
						},
						dataType: 'text',
						success: function(res) {
							//console.log(res);
							var data = JSON.parse(res);
							if(data.flag == '0000') {
								$('.alert').html('头像上传成功').addClass('alert-success').show().delay(1000).fadeOut();
							}
						}
					})
					//关闭裁剪框
					closeTailor();
				}
			});
			//关闭裁剪框
			function closeTailor() {
				$(".tailoring-container").toggle();
			}
		</script>

		<script>
			var resizefunc = [];

			$(function() {
				//为所有的文件夹绑定事件,注意新建的时候要重新绑定
				var folders = $('.folder-report');
				var banks = $('.custom-col');
				var i = 0;
				for(i = 0; i < folders.length; i++) {
					new DurgaFx(folders[i]);
				}
				//				for(i = 0; i < banks.length; i++) {
				//					new DurgaFx(banks[i]);
				//				}

				$("[data-toggle='tooltip']").tooltip();

				$('.single-product-item').hover(function() {
					$(this).find('.product-image').show();
				}, function() {
					$(this).find('.product-image').hide();
				})

				$('.hover-icon-list a').hover(function() {
					//					alert('11');
				})
				$('.folder__thumb').click(function() {
					alert(11);
				})
				
				var currentbankid;
//				//添加试卷
//				$('.addtitle-paper').click(function(){
//						if($(this).parent().prev().find('.icon').hasClass('icon-UploadCLoud')){
//						$('.alert').html('该试卷已上架到试卷无法添加').addClass('alert-danger').show().delay(1000).fadeOut();
//					}else{
//						currentbankid=$(this).closest('.custom-col').attr('paperid');
//						alert(currentbankid);
//						$('#addtitle-paperModal').modal('show');
//					}
//				})
				
						
					$('#excelchoice .btn-add').click(function(){
//					alert('111');
					$(this).prev().click();
				})	
						
				})
				
				
				
				
			
			function addquestion(obj){
				currentbankid = $(obj).attr("value");
//				alert(currentbankid);
				$('#addtitle-paperModal').modal('show');
			}
			
			
			//添加试卷
				$('.excelchoicemadol').click(function(){		
						$('#addtitle-paperModal').modal('hide');
						var bank ={'bankid':currentbankid};
//						alert(currentbankid);
						$.ajax({
						url: 'setcurrent',
						type: 'post',
						contentType: 'application/json;charset=utf-8', //请求的字符编码
						data: JSON.stringify(bank), //转换成json格式字符串
						dateType: "text", //返回类型
						success: function(e) {
						$('#excelchoice').modal('show');
						},
						error: function() {
						
						}
					});
				})
			
			function addquestion2(){
				$('.alert').html('该试卷已上架到试卷无法添加').addClass('alert-danger').show().delay(1000).fadeOut();
			}
			
			function addbyform(){
//				alert(currentbankid);
				window.location.href = "editorBank?bankid="+currentbankid;
				}
			
			$(function () {
                var $input =  $("#addchoice");
                // ①为input设定change事件
//              alert("111");
                $input.change(function () {
                //    ②如果value不为空，调用文件加载方法
                    if($(this).val() != ""){
//                  	alert("5555");
                        addchoicefun(this);
                    }
                })
            })
			
			
			$(function () {
                var $input =  $("#addfill");
                // ①为input设定change事件
//              alert("111");
                $input.change(function () {
                //    ②如果value不为空，调用文件加载方法
                    if($(this).val() != ""){
//                  	alert("5555");
                        addfillfun(this);
                    }
                })
            })
			
			   function addchoicefun(ele){
//			   	alert("888");
                  //④创建一个formData对象
                var formData = new FormData();
                //⑤获取传入元素的val
//              var name = $(ele).val();
//              alert(name);
                  //⑥获取files
                var files = $(ele)[0].files[0];
                //⑦将name 和 files 添加到formData中，键值对形式
                formData.append("file", files);
                formData.append("name", name);
//              alert('999');
//				sessionStorage.setItem("currentBankid",currentbankid);
//				var value = sessionStorage.getItem("currentBankid"); 	
//				alert(value);
				
                $.ajax({
                	
                    url: "addChoiceByExcel",
                    type: 'POST',
                    data: formData,
                    processData: false,// ⑧告诉jQuery不要去处理发送的数据
                    contentType: false, // ⑨告诉jQuery不要去设置Content-Type请求头
                    beforeSend: function () { 
                       //⑩发送之前的动作
//                    
                    },
                    success: function (responseStr) {
                       //11成功后的动作
//                     
					$('.alert').html('上传成功！').addClass('alert-success').show().delay(1000).fadeOut();
					$('#excelchoice').modal('hide');
                    }
                    ,
                    error : function (responseStr) {
                        //12出错后的动作
                       $('.alert').html('上传失败！').addClass('alert-danger').show().delay(1000).fadeOut();
                    }
                });
            }
			   
			    function addfillfun(ele){
//			   	alert("888");
                  //④创建一个formData对象
                var formData = new FormData();
                //⑤获取传入元素的val
//              var name = $(ele).val();
//              alert(name);
                  //⑥获取files
                var files = $(ele)[0].files[0];
                //⑦将name 和 files 添加到formData中，键值对形式
                formData.append("file", files);
                formData.append("name", name);
//              alert('999');
//				sessionStorage.setItem("currentBankid",currentbankid);
//				var value = sessionStorage.getItem("currentBankid"); 	
//				alert(value);
				
                $.ajax({
                	
                    url: "addFillByExcel",
                    type: 'POST',
                    data: formData,
                    processData: false,// ⑧告诉jQuery不要去处理发送的数据
                    contentType: false, // ⑨告诉jQuery不要去设置Content-Type请求头
                    beforeSend: function () { 
                       //⑩发送之前的动作
//                    
                    },
                    success: function (responseStr) {
                       //11成功后的动作
//                     
					$('.alert').html('上传成功！').addClass('alert-success').show().delay(1000).fadeOut();
					$('#excelchoice').modal('hide');
                    }
                    ,
                    error : function (responseStr) {
                        //12出错后的动作
                       $('.alert').html('上传失败！').addClass('alert-danger').show().delay(1000).fadeOut();
                    }
                });
            }
			
		</script>

		<script type="text/javascript">
			$(function() {
				
				//添加文件夹
				$('#addbankfolder').click(function() {

//					alert("88888");
					var p1 = $('#recipient-name').val();

					if(p1 == null || p1 == '') {
						$('.alert').html('文件名不能为空！').addClass('alert-warning').show().delay(2000).fadeOut();

						return;
					}
					var alreadyfolder = $('.folder-report');
					var i = 0;
					for(i = 0; i < alreadyfolder.length; i++) {
						if(alreadyfolder.eq(i).find('.folder-name span').text() == $('#recipient-name').val()) {
							$('.alert').html('已存在同名文件夹！添加失败').addClass('alert-warning').show().delay(2000).fadeOut();
							return;
						}
					}

					var p2 = '[[${currentfolderid}]]';
					//		alert(p2);
					var u = {
						'foldername': p1,
						'c4': p2
					}; //包装成一个js对象
					$.ajax({
						url: 'addbankfolder',
						type: 'post',
						contentType: 'application/json;charset=utf-8', //请求的字符编码
						data: JSON.stringify(u), //转换成json格式字符串
						dateType: "text", //返回类型
						success: function(e) {
							//				alert(e);
							$('.alert').html('创建成功！').addClass('alert-success').show().delay(1000).fadeOut();

							if(p2 == "") {
								window.location.href = "tobankTeacher";
							} else {
								window.location.href = "tobankTeacher2?folderid=" + p2;
							}

						},
						error: function() {
							$('.alert').html('创建失败！').addClass('alert-warning').show().delay(1000).fadeOut();

						}
					});
				});

			})

			function edit(obj) {
					$('#clickbankid').val($(obj).attr("value"));
					$('#new-bank-name').val($(obj).attr("name"));
					$('#new-bank-describe').val($(obj).attr("description"));
					$('#editor-bankModal').modal('show');
			}
			function edit2(obj) {
				$('.alert').html('该题库已上架到题库无法编辑').addClass('alert-danger').show().delay(1000).fadeOut();
		
			}

			function upload(obj) {

				$('#uploadclickbankid').val($(obj).attr("value"));
				//		$('#new-bank-name').val($(obj).attr("name"));
				//		$('#new-bank-describe').val($(obj).attr("description"));
				$('#upload-bankModal').modal('show');

			}
			
			function bank(){
				
				window.location.href ="tobankTeacher";
			}
			
			function garbage(){
				
				window.location.href ="tobankTrashTeacher";
			}
			
		</script>

	</body>

</html>